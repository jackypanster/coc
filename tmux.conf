# tmux configuration for Code on Cloud
# Optimized for Chrome browser compatibility

# Enable UTF-8 support (for tmux < 2.2)
# set -g utf8 on
# set -g status-utf8 on

# Enable mouse support
set -g mouse on

# Set prefix to Ctrl-a (easier to reach than Ctrl-b)
# Note: Ctrl-b conflicts with Chrome's bookmark shortcut
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Alternative prefix for better browser compatibility
# Use Ctrl+Space as it rarely conflicts with browser shortcuts
# unbind C-Space
# set -g prefix C-Space
# bind C-Space send-prefix

# Split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Switch panes using Alt-arrow without prefix
# Note: Alt+arrow might conflict with browser back/forward
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Alternative: Use Ctrl+hjkl for pane navigation (vim-style)
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Terminal compatibility for Chrome
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Fix for Chrome's keyboard handling
set -s escape-time 0
set -g focus-events on

# Better clipboard integration
set -g set-clipboard on

# Start window numbering at 1
set -g base-index 1
set -g pane-base-index 1

# Rename window to reflect current program
setw -g automatic-rename on

# Renumber windows when a window is closed
set -g renumber-windows on

# Set scrollback buffer size
set -g history-limit 10000

# Status bar customization
set -g status-bg colour235
set -g status-fg colour255
set -g status-left '#[fg=colour255,bg=colour24] #S #[fg=colour24,bg=colour235]'
set -g status-right '#[fg=colour255,bg=colour24] %Y-%m-%d %H:%M '
set -g window-status-current-format '#[fg=colour235,bg=colour39]#[fg=colour235,bg=colour39] #I:#W #[fg=colour39,bg=colour235]'

# Copy mode improvements for browser
setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Mouse selection automatically copies to clipboard
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel

# Double click to select word
bind-key -n DoubleClick1Pane select-pane \; copy-mode -M \; send-keys -X select-word

# Triple click to select line
bind-key -n TripleClick1Pane select-pane \; copy-mode -M \; send-keys -X select-line